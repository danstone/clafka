<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>clafka.sim documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Clafka 0.2.2 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>clafka</span></div></div></li><li class="depth-2 branch"><a href="clafka.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="clafka.pool.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pool</span></div></a></li><li class="depth-2 branch"><a href="clafka.proto.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>proto</span></div></a></li><li class="depth-2 current"><a href="clafka.sim.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sim</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="clafka.sim.html#var-.2Bleader"><div class="inner"><span>+leader</span></div></a></li><li class="depth-1"><a href="clafka.sim.html#var-.2Bmake-leader"><div class="inner"><span>+make-leader</span></div></a></li><li class="depth-1"><a href="clafka.sim.html#var-.2Bmessage"><div class="inner"><span>+message</span></div></a></li><li class="depth-1"><a href="clafka.sim.html#var-.2Bmessages"><div class="inner"><span>+messages</span></div></a></li><li class="depth-1"><a href="clafka.sim.html#var--.3ESimulatedClient"><div class="inner"><span>-&gt;SimulatedClient</span></div></a></li><li class="depth-1"><a href="clafka.sim.html#var-add-leader"><div class="inner"><span>add-leader</span></div></a></li><li class="depth-1"><a href="clafka.sim.html#var-add-message"><div class="inner"><span>add-message</span></div></a></li><li class="depth-1"><a href="clafka.sim.html#var-broker"><div class="inner"><span>broker</span></div></a></li><li class="depth-1"><a href="clafka.sim.html#var-client"><div class="inner"><span>client</span></div></a></li><li class="depth-1"><a href="clafka.sim.html#var-head-block"><div class="inner"><span>head-block</span></div></a></li><li class="depth-1"><a href="clafka.sim.html#var-make-leader"><div class="inner"><span>make-leader</span></div></a></li><li class="depth-1"><a href="clafka.sim.html#var-map-.3ESimulatedClient"><div class="inner"><span>map-&gt;SimulatedClient</span></div></a></li><li class="depth-1"><a href="clafka.sim.html#var-message"><div class="inner"><span>message</span></div></a></li><li class="depth-1"><a href="clafka.sim.html#var-messages"><div class="inner"><span>messages</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">clafka.sim</h2><div class="doc"><div class="markdown"><p>Contains a simulated IBrokerClient for use in tests and at the repl</p></div></div><div class="public anchor" id="var-.2Bleader"><h3>+leader</h3><div class="usage"><code>(+leader m topic partition broker)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="http://github.com/mixradio/clafka/blob/0.2.2/src/clafka/sim.clj#L77">view source</a></div></div><div class="public anchor" id="var-.2Bmake-leader"><h3>+make-leader</h3><div class="usage"><code>(+make-leader m topic partition)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="http://github.com/mixradio/clafka/blob/0.2.2/src/clafka/sim.clj#L85">view source</a></div></div><div class="public anchor" id="var-.2Bmessage"><h3>+message</h3><div class="usage"><code>(+message m topic partition message)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="http://github.com/mixradio/clafka/blob/0.2.2/src/clafka/sim.clj#L99">view source</a></div></div><div class="public anchor" id="var-.2Bmessages"><h3>+messages</h3><div class="usage"><code>(+messages m topic partition messages)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="http://github.com/mixradio/clafka/blob/0.2.2/src/clafka/sim.clj#L109">view source</a></div></div><div class="public anchor" id="var--.3ESimulatedClient"><h3>-&gt;SimulatedClient</h3><div class="usage"><code>(-&gt;SimulatedClient state)</code></div><div class="doc"><div class="markdown"><p>Positional factory function for class clafka.sim.SimulatedClient.</p></div></div><div class="src-link"><a href="http://github.com/mixradio/clafka/blob/0.2.2/src/clafka/sim.clj#L22">view source</a></div></div><div class="public anchor" id="var-add-leader"><h3>add-leader</h3><div class="usage"><code>(add-leader client topic partition broker)</code></div><div class="doc"><div class="markdown"><p>Makes a simulated client recognise the broker as leader for the given partition</p></div></div><div class="src-link"><a href="http://github.com/mixradio/clafka/blob/0.2.2/src/clafka/sim.clj#L89">view source</a></div></div><div class="public anchor" id="var-add-message"><h3>add-message</h3><div class="usage"><code>(add-message client topic partition message)</code></div><div class="doc"><div class="markdown"><p>Adds a message to the simulated client&rsquo;s log</p></div></div><div class="src-link"><a href="http://github.com/mixradio/clafka/blob/0.2.2/src/clafka/sim.clj#L113">view source</a></div></div><div class="public anchor" id="var-broker"><h3>broker</h3><div class="usage"><code>(broker host port)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="http://github.com/mixradio/clafka/blob/0.2.2/src/clafka/sim.clj#L71">view source</a></div></div><div class="public anchor" id="var-client"><h3>client</h3><div class="usage"><code>(client m)</code></div><div class="doc"><div class="markdown"><p>Create a simulated client suitable for tests and repl usage. e.g (client (-&gt; (broker &ldquo;localhost&rdquo; 9092) (+make-leader &ldquo;test&rdquo; 0) (+messages &ldquo;test&rdquo; 0 (messages 20)))) =&gt; creates a client that is the leader of topic: test partition: 0, having 20 1024 byte messages in its log.</p></div></div><div class="src-link"><a href="http://github.com/mixradio/clafka/blob/0.2.2/src/clafka/sim.clj#L64">view source</a></div></div><div class="public anchor" id="var-head-block"><h3>head-block</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="http://github.com/mixradio/clafka/blob/0.2.2/src/clafka/sim.clj#L6">view source</a></div></div><div class="public anchor" id="var-make-leader"><h3>make-leader</h3><div class="usage"><code>(make-leader client topic partition)</code></div><div class="doc"><div class="markdown"><p>Makes the client a leader for the given partition</p></div></div><div class="src-link"><a href="http://github.com/mixradio/clafka/blob/0.2.2/src/clafka/sim.clj#L94">view source</a></div></div><div class="public anchor" id="var-map-.3ESimulatedClient"><h3>map-&gt;SimulatedClient</h3><div class="usage"><code>(map-&gt;SimulatedClient m__5869__auto__)</code></div><div class="doc"><div class="markdown"><p>Factory function for class clafka.sim.SimulatedClient, taking a map of keywords to field values.</p></div></div><div class="src-link"><a href="http://github.com/mixradio/clafka/blob/0.2.2/src/clafka/sim.clj#L22">view source</a></div></div><div class="public anchor" id="var-message"><h3>message</h3><div class="usage"><code>(message)</code><code>(message payload)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="http://github.com/mixradio/clafka/blob/0.2.2/src/clafka/sim.clj#L11">view source</a></div></div><div class="public anchor" id="var-messages"><h3>messages</h3><div class="usage"><code>(messages n)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="http://github.com/mixradio/clafka/blob/0.2.2/src/clafka/sim.clj#L18">view source</a></div></div></div></body></html>